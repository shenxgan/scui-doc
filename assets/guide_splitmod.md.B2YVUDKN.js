import{_ as s,c as i,o as a,a3 as n,a4 as l}from"./chunks/framework.CjiOseYb.js";const y=JSON.parse('{"title":"模块抽离","description":"","frontmatter":{},"headers":[],"relativePath":"guide/splitmod.md","filePath":"guide/splitmod.md","lastUpdated":1718880150000}'),p={name:"guide/splitmod.md"},t=n(`<h1 id="模块抽离" tabindex="-1">模块抽离 <a class="header-anchor" href="#模块抽离" aria-label="Permalink to &quot;模块抽离&quot;">​</a></h1><p>当项目时间累积，使用第三方模块的数量将会不断增加，从来导致打包后app.js过大，这时候就要抽离一些非常用或者体积过大的模块。</p><p>比如本项目中的富文本编辑器和百度echarts。使用频率低，文件还硕大，所以决定将这2着分离出独立的JS文件，自动按需加载使用。</p><h2 id="splitchunks" tabindex="-1">splitChunks <a class="header-anchor" href="#splitchunks" aria-label="Permalink to &quot;splitChunks&quot;">​</a></h2><p>本项目采用Webpack官方splitChunks分割模块。</p><div class="language-javascript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes min-light min-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#C2C3C5;--shiki-dark:#6B737C;">//vue.config.js</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">splitChunks</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">:</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">	chunks</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">:</span><span style="--shiki-light:#22863A;--shiki-dark:#FFAB70;"> &quot;all&quot;</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">,</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">	automaticNameDelimiter</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">:</span><span style="--shiki-light:#22863A;--shiki-dark:#FFAB70;"> &#39;~&#39;</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">,</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">	name</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">:</span><span style="--shiki-light:#1976D2;--shiki-dark:#79B8FF;"> true</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">,</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">	cacheGroups</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">:</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> {</span></span>
<span class="line"><span style="--shiki-light:#C2C3C5;--shiki-dark:#6B737C;">		//第三方库抽离</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">		vendor</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">:</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">			name</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">:</span><span style="--shiki-light:#22863A;--shiki-dark:#FFAB70;"> &quot;modules&quot;</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">,</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">			test</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">:</span><span style="--shiki-light:#22863A;--shiki-dark:#FFAB70;"> /[\\\\/]node_modules[\\\\/]/</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">,</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">			priority</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">:</span><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;"> -</span><span style="--shiki-light:#1976D2;--shiki-dark:#F8F8F8;">10</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">		}</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">,</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">		elicons</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">:</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">			name</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">:</span><span style="--shiki-light:#22863A;--shiki-dark:#FFAB70;"> &quot;elicons&quot;</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">,</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">			test</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">:</span><span style="--shiki-light:#22863A;--shiki-dark:#FFAB70;"> /[\\\\/]node_modules[\\\\/]@element-plus[\\\\/]icons[\\\\/]/</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">		}</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">,</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">		tinymce</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">:</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">			name</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">:</span><span style="--shiki-light:#22863A;--shiki-dark:#FFAB70;"> &quot;tinymce&quot;</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">,</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">			test</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">:</span><span style="--shiki-light:#22863A;--shiki-dark:#FFAB70;"> /[\\\\/]node_modules[\\\\/]tinymce[\\\\/]/</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">		}</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">,</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">		echarts</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">:</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">			name</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">:</span><span style="--shiki-light:#22863A;--shiki-dark:#FFAB70;"> &quot;echarts&quot;</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">,</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">			test</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">:</span><span style="--shiki-light:#22863A;--shiki-dark:#FFAB70;"> /[\\\\/]node_modules[\\\\/]echarts[\\\\/]/</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">		}</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">	}</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br></div></div><p>这样配置在打包后生成的文件列表，如下：</p><div class="language-sh vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes min-light min-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">┌──</span><span style="--shiki-light:#2B5581;--shiki-dark:#9DB1C5;"> dist</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">│</span><span style="--shiki-light:#2B5581;--shiki-dark:#9DB1C5;">	└──</span><span style="--shiki-light:#2B5581;--shiki-dark:#9DB1C5;"> js</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">│</span><span style="--shiki-light:#2B5581;--shiki-dark:#9DB1C5;">	│</span><span style="--shiki-light:#2B5581;--shiki-dark:#9DB1C5;">	├──</span><span style="--shiki-light:#2B5581;--shiki-dark:#9DB1C5;"> modules.b98a1fa8.js</span><span style="--shiki-light:#C2C3C5;--shiki-dark:#6B737C;">		# 其他第三方依赖</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">│</span><span style="--shiki-light:#2B5581;--shiki-dark:#9DB1C5;">	│</span><span style="--shiki-light:#2B5581;--shiki-dark:#9DB1C5;">	├──</span><span style="--shiki-light:#2B5581;--shiki-dark:#9DB1C5;"> tinymce.a3eec3b4.js</span><span style="--shiki-light:#C2C3C5;--shiki-dark:#6B737C;">		# 富文本编辑器tinymce依赖</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">│</span><span style="--shiki-light:#2B5581;--shiki-dark:#9DB1C5;">	│</span><span style="--shiki-light:#2B5581;--shiki-dark:#9DB1C5;">	├──</span><span style="--shiki-light:#2B5581;--shiki-dark:#9DB1C5;"> echarts.c17b2673.js</span><span style="--shiki-light:#C2C3C5;--shiki-dark:#6B737C;">		# 百度echarts用到的依赖</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">│</span><span style="--shiki-light:#2B5581;--shiki-dark:#9DB1C5;">	│</span><span style="--shiki-light:#2B5581;--shiki-dark:#9DB1C5;">	├──</span><span style="--shiki-light:#2B5581;--shiki-dark:#9DB1C5;"> elicons.1733fe4c.js</span><span style="--shiki-light:#C2C3C5;--shiki-dark:#6B737C;">		# @element-plus/icons依赖</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">│</span><span style="--shiki-light:#2B5581;--shiki-dark:#9DB1C5;">	│</span><span style="--shiki-light:#2B5581;--shiki-dark:#9DB1C5;">	├──</span><span style="--shiki-light:#2B5581;--shiki-dark:#9DB1C5;"> app.73ba8337.js</span><span style="--shiki-light:#C2C3C5;--shiki-dark:#6B737C;">			# 项目框架</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">│</span><span style="--shiki-light:#2B5581;--shiki-dark:#9DB1C5;">	│</span><span style="--shiki-light:#2B5581;--shiki-dark:#9DB1C5;">	└──</span><span style="--shiki-light:#2B5581;--shiki-dark:#9DB1C5;"> ***.js</span><span style="--shiki-light:#C2C3C5;--shiki-dark:#6B737C;">					# 其他视图</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">│</span><span style="--shiki-light:#2B5581;--shiki-dark:#9DB1C5;">	└──</span><span style="--shiki-light:#2B5581;--shiki-dark:#9DB1C5;"> ***</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h2 id="分析" tabindex="-1">分析 <a class="header-anchor" href="#分析" aria-label="Permalink to &quot;分析&quot;">​</a></h2><p>在打包完成后，将在 dist 根目录下生成report.html，可以查看各个模块的体积分析，从而决定是否需要抽离。</p><img src="`+l+'">',11),h=[t];function e(k,B,r,d,c,F){return a(),i("div",null,h)}const b=s(p,[["render",e]]);export{y as __pageData,b as default};
