"use strict";(self["webpackChunkscui"]=self["webpackChunkscui"]||[]).push([[1170,711,4207,2809,6027,7020],{8269:function(t,e,s){s.r(e),s.d(e,{default:function(){return O}});s(8743);var i=s(641),l=s(33);const a={class:"widgets-content"},o={class:"widgets-top"},n={class:"widgets-top-actions"},d={class:"widgets",ref:"widgets"},u={class:"widgets-wrapper"},c={key:0,class:"no-widgets"},r={class:"widgets-item"},g={key:0,class:"customize-overlay"},m={key:0,class:"widgets-aside"},k={class:"widgets-aside-title"},p={class:"selectLayout"},f={class:"widgets-list"},L={key:0,class:"widgets-list-nodata"},h={class:"item-logo"},v={class:"item-info"},y={class:"item-actions"};function b(t,e,s,b,C,F){const _=(0,i.g2)("el-button"),w=(0,i.g2)("el-empty"),z=(0,i.g2)("el-icon"),$=(0,i.g2)("draggable"),O=(0,i.g2)("el-col"),X=(0,i.g2)("el-row"),W=(0,i.g2)("el-icon-circle-plus-filled"),E=(0,i.g2)("el-icon-close"),D=(0,i.g2)("el-header"),G=(0,i.g2)("el-main"),I=(0,i.g2)("el-footer"),T=(0,i.g2)("el-container");return(0,i.uX)(),(0,i.CE)("div",{class:(0,l.C4)(["widgets-home",C.customizing?"customizing":""]),ref:"main"},[(0,i.Lk)("div",a,[(0,i.Lk)("div",o,[e[7]||(e[7]=(0,i.Lk)("div",{class:"widgets-top-title"}," 控制台 ",-1)),(0,i.Lk)("div",n,[C.customizing?((0,i.uX)(),(0,i.Wv)(_,{key:0,type:"primary",icon:"el-icon-check",round:"",onClick:F.save},{default:(0,i.k6)((()=>e[5]||(e[5]=[(0,i.eW)("完成")]))),_:1},8,["onClick"])):((0,i.uX)(),(0,i.Wv)(_,{key:1,type:"primary",icon:"el-icon-edit",round:"",onClick:F.custom},{default:(0,i.k6)((()=>e[6]||(e[6]=[(0,i.eW)("自定义")]))),_:1},8,["onClick"]))])]),(0,i.Lk)("div",d,[(0,i.Lk)("div",u,[F.nowCompsList.length<=0?((0,i.uX)(),(0,i.CE)("div",c,[(0,i.bF)(w,{image:"img/no-widgets.svg",description:"没有部件啦","image-size":280})])):(0,i.Q3)("",!0),(0,i.bF)(X,{gutter:15},{default:(0,i.k6)((()=>[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(C.grid.layout,((t,e)=>((0,i.uX)(),(0,i.Wv)(O,{key:e,md:t,xs:24},{default:(0,i.k6)((()=>[(0,i.bF)($,{modelValue:C.grid.copmsList[e],"onUpdate:modelValue":t=>C.grid.copmsList[e]=t,animation:"200",handle:".customize-overlay",group:"people","item-key":"com",dragClass:"aaaaa","force-fallback":"",fallbackOnBody:"",class:"draggable-box"},{item:(0,i.k6)((({element:t})=>[(0,i.Lk)("div",r,[((0,i.uX)(),(0,i.Wv)((0,i.$y)(C.allComps[t]))),C.customizing?((0,i.uX)(),(0,i.CE)("div",g,[(0,i.bF)(_,{class:"close",type:"danger",plain:"",icon:"el-icon-close",size:"small",onClick:e=>F.remove(t)},null,8,["onClick"]),(0,i.Lk)("label",null,[(0,i.bF)(z,null,{default:(0,i.k6)((()=>[((0,i.uX)(),(0,i.Wv)((0,i.$y)(C.allComps[t].icon)))])),_:2},1024),(0,i.eW)((0,l.v_)(C.allComps[t].title),1)])])):(0,i.Q3)("",!0)])])),_:2},1032,["modelValue","onUpdate:modelValue"])])),_:2},1032,["md"])))),128))])),_:1})])],512)]),C.customizing?((0,i.uX)(),(0,i.CE)("div",m,[(0,i.bF)(T,null,{default:(0,i.k6)((()=>[(0,i.bF)(D,null,{default:(0,i.k6)((()=>[(0,i.Lk)("div",k,[(0,i.bF)(z,null,{default:(0,i.k6)((()=>[(0,i.bF)(W)])),_:1}),e[8]||(e[8]=(0,i.eW)("添加部件"))]),(0,i.Lk)("div",{class:"widgets-aside-close",onClick:e[0]||(e[0]=t=>F.close())},[(0,i.bF)(z,null,{default:(0,i.k6)((()=>[(0,i.bF)(E)])),_:1})])])),_:1}),(0,i.bF)(D,{style:{height:"auto"}},{default:(0,i.k6)((()=>[(0,i.Lk)("div",p,[(0,i.Lk)("div",{class:(0,l.C4)(["selectLayout-item item01",{active:"12,6,6"==C.grid.layout.join(",")}]),onClick:e[1]||(e[1]=t=>F.setLayout([12,6,6]))},[(0,i.bF)(X,{gutter:2},{default:(0,i.k6)((()=>[(0,i.bF)(O,{span:12},{default:(0,i.k6)((()=>e[9]||(e[9]=[(0,i.Lk)("span",null,null,-1)]))),_:1}),(0,i.bF)(O,{span:6},{default:(0,i.k6)((()=>e[10]||(e[10]=[(0,i.Lk)("span",null,null,-1)]))),_:1}),(0,i.bF)(O,{span:6},{default:(0,i.k6)((()=>e[11]||(e[11]=[(0,i.Lk)("span",null,null,-1)]))),_:1})])),_:1})],2),(0,i.Lk)("div",{class:(0,l.C4)(["selectLayout-item item02",{active:"24,16,8"==C.grid.layout.join(",")}]),onClick:e[2]||(e[2]=t=>F.setLayout([24,16,8]))},[(0,i.bF)(X,{gutter:2},{default:(0,i.k6)((()=>[(0,i.bF)(O,{span:24},{default:(0,i.k6)((()=>e[12]||(e[12]=[(0,i.Lk)("span",null,null,-1)]))),_:1}),(0,i.bF)(O,{span:16},{default:(0,i.k6)((()=>e[13]||(e[13]=[(0,i.Lk)("span",null,null,-1)]))),_:1}),(0,i.bF)(O,{span:8},{default:(0,i.k6)((()=>e[14]||(e[14]=[(0,i.Lk)("span",null,null,-1)]))),_:1})])),_:1})],2),(0,i.Lk)("div",{class:(0,l.C4)(["selectLayout-item item03",{active:"24"==C.grid.layout.join(",")}]),onClick:e[3]||(e[3]=t=>F.setLayout([24]))},[(0,i.bF)(X,{gutter:2},{default:(0,i.k6)((()=>[(0,i.bF)(O,{span:24},{default:(0,i.k6)((()=>e[15]||(e[15]=[(0,i.Lk)("span",null,null,-1)]))),_:1}),(0,i.bF)(O,{span:24},{default:(0,i.k6)((()=>e[16]||(e[16]=[(0,i.Lk)("span",null,null,-1)]))),_:1}),(0,i.bF)(O,{span:24},{default:(0,i.k6)((()=>e[17]||(e[17]=[(0,i.Lk)("span",null,null,-1)]))),_:1})])),_:1})],2)])])),_:1}),(0,i.bF)(G,{class:"nopadding"},{default:(0,i.k6)((()=>[(0,i.Lk)("div",f,[F.myCompsList.length<=0?((0,i.uX)(),(0,i.CE)("div",L,[(0,i.bF)(w,{description:"没有部件啦","image-size":60})])):(0,i.Q3)("",!0),((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(F.myCompsList,(t=>((0,i.uX)(),(0,i.CE)("div",{key:t.title,class:"widgets-list-item"},[(0,i.Lk)("div",h,[(0,i.bF)(z,null,{default:(0,i.k6)((()=>[((0,i.uX)(),(0,i.Wv)((0,i.$y)(t.icon)))])),_:2},1024)]),(0,i.Lk)("div",v,[(0,i.Lk)("h2",null,(0,l.v_)(t.title),1),(0,i.Lk)("p",null,(0,l.v_)(t.description),1)]),(0,i.Lk)("div",y,[(0,i.bF)(_,{type:"primary",icon:"el-icon-plus",size:"small",onClick:e=>F.push(t)},null,8,["onClick"])])])))),128))])])),_:1}),(0,i.bF)(I,{style:{height:"51px"}},{default:(0,i.k6)((()=>[(0,i.bF)(_,{size:"small",onClick:e[4]||(e[4]=t=>F.backDefaul())},{default:(0,i.k6)((()=>e[18]||(e[18]=[(0,i.eW)("恢复默认")]))),_:1})])),_:1})])),_:1})])):(0,i.Q3)("",!0)],2)}var C=s(432),F=s.n(C),_=s(6511),w={components:{draggable:F()},data(){return{customizing:!1,allComps:_["default"],selectLayout:[],defaultGrid:this.$CONFIG.DEFAULT_GRID,grid:[]}},created(){this.grid=this.$TOOL.data.get("grid")||JSON.parse(JSON.stringify(this.defaultGrid))},mounted(){this.$emit("on-mounted")},computed:{allCompsList(){var t=[];for(var e in this.allComps)t.push({key:e,title:_["default"][e].title,icon:_["default"][e].icon,description:_["default"][e].description});var s=this.grid.copmsList.reduce((function(t,e){return t.concat(e)}));for(let i of t){const t=s.find((t=>t===i.key));t&&(i.disabled=!0)}return t},myCompsList(){var t=this.$TOOL.data.get("DASHBOARDGRID");return this.allCompsList.filter((e=>!e.disabled&&t.includes(e.key)))},nowCompsList(){return this.grid.copmsList.reduce((function(t,e){return t.concat(e)}))}},methods:{custom(){this.customizing=!0;const t=this.$refs.widgets.offsetWidth;this.$nextTick((()=>{const e=this.$refs.widgets.offsetWidth/t;this.$refs.widgets.style.setProperty("transform",`scale(${e})`)}))},setLayout(t){this.grid.layout=t,"24"==t.join(",")&&(this.grid.copmsList[0]=[...this.grid.copmsList[0],...this.grid.copmsList[1],...this.grid.copmsList[2]],this.grid.copmsList[1]=[],this.grid.copmsList[2]=[])},push(t){let e=this.grid.copmsList[0];e.push(t.key)},remove(t){var e=this.grid.copmsList;e.forEach(((s,i)=>{var l=s.filter((e=>e!=t));e[i]=l}))},save(){this.customizing=!1,this.$refs.widgets.style.removeProperty("transform"),this.$TOOL.data.set("grid",this.grid)},backDefaul(){this.customizing=!1,this.$refs.widgets.style.removeProperty("transform"),this.grid=JSON.parse(JSON.stringify(this.defaultGrid)),this.$TOOL.data.remove("grid")},close(){this.customizing=!1,this.$refs.widgets.style.removeProperty("transform")}}},z=s(6262);const $=(0,z.A)(w,[["render",b],["__scopeId","data-v-3cc37176"]]);var O=$}}]);