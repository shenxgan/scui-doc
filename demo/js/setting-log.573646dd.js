"use strict";(self["webpackChunkscui"]=self["webpackChunkscui"]||[]).push([[2056,4577],{7363:function(e,l,a){a.r(l),a.d(l,{default:function(){return s}});var t=a(641);const r={class:"left-panel"};function o(e,l,a,o,i,n){const d=(0,t.g2)("el-tree"),p=(0,t.g2)("el-aside"),c=(0,t.g2)("el-date-picker"),s=(0,t.g2)("el-header"),b=(0,t.g2)("scEcharts"),u=(0,t.g2)("el-icon-circle-close-filled"),f=(0,t.g2)("el-icon"),h=(0,t.g2)("el-icon-warning-filled"),g=(0,t.g2)("el-icon-info-filled"),k=(0,t.g2)("el-table-column"),w=(0,t.g2)("scTable"),F=(0,t.g2)("el-main"),y=(0,t.g2)("el-container"),m=(0,t.g2)("info"),x=(0,t.g2)("el-drawer");return(0,t.uX)(),(0,t.CE)(t.FK,null,[(0,t.bF)(y,null,{default:(0,t.k6)((()=>[(0,t.bF)(p,{width:"220px"},{default:(0,t.k6)((()=>[(0,t.bF)(d,{ref:"category",class:"menu","node-key":"label",data:i.category,"default-expanded-keys":["系统日志"],"current-node-key":"系统日志","highlight-current":!0,"expand-on-click-node":!1},null,8,["data"])])),_:1}),(0,t.bF)(y,null,{default:(0,t.k6)((()=>[(0,t.bF)(F,{class:"nopadding"},{default:(0,t.k6)((()=>[(0,t.bF)(y,null,{default:(0,t.k6)((()=>[(0,t.bF)(s,null,{default:(0,t.k6)((()=>[(0,t.Lk)("div",r,[(0,t.bF)(c,{modelValue:i.date,"onUpdate:modelValue":l[0]||(l[0]=e=>i.date=e),type:"datetimerange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},null,8,["modelValue"])]),l[2]||(l[2]=(0,t.Lk)("div",{class:"right-panel"},null,-1))])),_:1}),(0,t.bF)(s,{style:{height:"150px"}},{default:(0,t.k6)((()=>[(0,t.bF)(b,{height:"100%",option:i.logsChartOption},null,8,["option"])])),_:1}),(0,t.bF)(F,{class:"nopadding"},{default:(0,t.k6)((()=>[(0,t.bF)(w,{ref:"table",apiObj:i.apiObj,stripe:"",highlightCurrentRow:"",onRowClick:n.rowClick},{default:(0,t.k6)((()=>[(0,t.bF)(k,{label:"级别",prop:"level",width:"60"},{default:(0,t.k6)((e=>["error"==e.row.level?((0,t.uX)(),(0,t.Wv)(f,{key:0,style:{color:"#F56C6C"}},{default:(0,t.k6)((()=>[(0,t.bF)(u)])),_:1})):(0,t.Q3)("",!0),"warn"==e.row.level?((0,t.uX)(),(0,t.Wv)(f,{key:1,style:{color:"#E6A23C"}},{default:(0,t.k6)((()=>[(0,t.bF)(h)])),_:1})):(0,t.Q3)("",!0),"info"==e.row.level?((0,t.uX)(),(0,t.Wv)(f,{key:2,style:{color:"#409EFF"}},{default:(0,t.k6)((()=>[(0,t.bF)(g)])),_:1})):(0,t.Q3)("",!0)])),_:1}),(0,t.bF)(k,{label:"ID",prop:"id",width:"180"}),(0,t.bF)(k,{label:"日志名",prop:"name",width:"150"}),(0,t.bF)(k,{label:"请求接口",prop:"url",width:"150"}),(0,t.bF)(k,{label:"请求方法",prop:"type",width:"150"}),(0,t.bF)(k,{label:"用户",prop:"user",width:"150"}),(0,t.bF)(k,{label:"客户端IP",prop:"cip",width:"150"}),(0,t.bF)(k,{label:"日志时间",prop:"time",width:"170"})])),_:1},8,["apiObj","onRowClick"])])),_:1})])),_:1})])),_:1})])),_:1})])),_:1}),(0,t.bF)(x,{modelValue:i.infoDrawer,"onUpdate:modelValue":l[1]||(l[1]=e=>i.infoDrawer=e),title:"日志详情",size:600,"destroy-on-close":""},{default:(0,t.k6)((()=>[(0,t.bF)(m,{ref:"info"},null,512)])),_:1},8,["modelValue"])],64)}var i=a(3967),n=a(859),d={name:"log",components:{info:i["default"],scEcharts:n.A},data(){return{infoDrawer:!1,logsChartOption:{color:["#409eff","#e6a23c","#f56c6c"],grid:{top:"0px",left:"10px",right:"10px",bottom:"0px"},tooltip:{trigger:"axis"},xAxis:{type:"category",boundaryGap:!1,data:["2021-07-01","2021-07-02","2021-07-03","2021-07-04","2021-07-05","2021-07-06","2021-07-07","2021-07-08","2021-07-09","2021-07-10","2021-07-11","2021-07-12","2021-07-13","2021-07-14","2021-07-15"]},yAxis:{show:!1,type:"value"},series:[{data:[120,200,150,80,70,110,130,120,200,150,80,70,110,130,70,110],type:"bar",stack:"log",barWidth:"15px"},{data:[15,26,7,12,13,9,21,15,26,7,12,13,9,21,12,3],type:"bar",stack:"log",barWidth:"15px"},{data:[0,0,0,120,0,0,0,0,0,0,0,0,0,0,0,0],type:"bar",stack:"log",barWidth:"15px"}]},category:[{label:"系统日志",children:[{label:"debug"},{label:"info"},{label:"warn"},{label:"error"},{label:"fatal"}]},{label:"应用日志",children:[{label:"selfHelp"},{label:"WechatApp"}]}],date:[],apiObj:this.$API.system.log.list,search:{keyword:""}}},methods:{upsearch(){},rowClick(e){this.infoDrawer=!0,this.$nextTick((()=>{this.$refs.info.setData(e)}))}}},p=a(6262);const c=(0,p.A)(d,[["render",o]]);var s=c}}]);